<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>上传多种格式文件</title>
	<link rel="stylesheet" type="text/css" href="../statics/plugins/layui/css/layui.css">
</head>
<body>
	<button class="layui-btn" onclick="post_file()">上传文件</button>
</body>
<script src="../statics/plugins/js/jquery-1.10.2.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="../statics/plugins/layui/layui.js"></script>
<script type="text/javascript">
	post_file = function(){
		$('body').append('<input id="file_input" type="file" style="display:none;"/>');
		
		$('#file_input').off('change').on('change', function (e) {
          //支持 FileReader
          if (window.FileReader) {

              var file = e.target.files[0]; //file.name文件全名,file.size文件尺寸，以B为单位
              var fd = new FormData();
              fd.append("file", file);
              $.ajax({
                  url:'resum/upload',
                  type: "POST",
                  processData: false,
                  contentType: false,
                  async: false,
                  data: fd,
                  xhr: function () {
                      var xhr = $.ajaxSettings.xhr();
                      return xhr;
                  },
                  success: function (data) {
                  	console.log('成功');
                  }
              }).always(function () {
                  $('#file_input').empty().remove();
              });

          } else {
              $('#file_input').empty().remove();
          }
          return false;
      });
      setTimeout(function () {
          $('#file_input').click();
      }, 0);
      return false;
	}
</script>
</html>